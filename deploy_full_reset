#!/bin/bash

# --- CONFIGURATION ---
SERVICE_NAME="agent"
# ---

echo "--- DEPLOYMENT FULL RESET (ALL DATA) START: $(date) ---"

# 1. Stop the running container
echo "1. Stopping the Agent container..."
docker-compose stop "$SERVICE_NAME" 2>/dev/null || true

# 2. Overwrite ALL data files
echo "2. Forcing copy of ALL files from src/data/ to workspace/data/..."
# The -a flag ensures metadata is preserved, -f ensures overwrite.
cp -af src/data/. workspace/data/

# 3. Restart the container
echo "3. Restarting the Docker container..."
docker-compose start "$SERVICE_NAME"

echo "--- DEPLOYMENT FULL RESET COMPLETE ---"