version: '3.8'

services:
  agent:
    # Use the Dockerfile in the current directory (./Agent) to build the image
    build: .
    # Map the current working directory on the host (MacBook) to /app inside the container
    volumes:
      - .:/app
    # Name the container clearly for easy identification
    container_name: nextgen_agent_dev
    
    # Load environment variables from the .env file in the current directory
    env_file:
      - .env
    
    # Environment variables are primarily loaded from .env, but we can set others here
    environment:
      AGENT_ENV: production # Change to production since it's now running autonomously
    
    # Keep the container running in the background for development
    restart: "no"
    
    # MODIFIED: Default command to run when the container starts
    # This executes the Python script, making the Agent run the loop continuously.
    command: python agent_core.py